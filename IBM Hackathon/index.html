<!DOCTYPE html>
<html>
<head>
    <title>AgentAudit.ai</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>üõ°Ô∏è AgentAudit.ai Dashboard</h1>
    <div class="main">
        <input type="text" id="userInput" placeholder="Ask to audit...">
        <button onclick="run()">Audit</button>
        <p>Cost: <span id="cost">$0.00</span> | CO2: <span id="co2">0g</span></p>
    </div>
    
    <h3>Active Governance Rules</h3>
    <ul>
        {% for rule in rules %}
        <li>{{ rule.Input_Prompt }} -> {{ rule.Reference_Safety_Action }}</li>
        {% endfor %}
    </ul>

    <script>
        async function run() {
            const text = document.getElementById('userInput').value;
            const res = await fetch('/audit', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({text})
            });
            const data = await res.json();
            document.getElementById('cost').innerText = `$${data.metrics.cost}`;
            document.getElementById('co2').innerText = `${data.metrics.co2}g`;
        }
    </script>
</body>
</html>